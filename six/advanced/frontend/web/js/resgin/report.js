!function(e,t){"function"==typeof define?"object"==typeof LBF?LBF.define("qidian.report",function(){return t(e)}):define(function(){return t(e)}):t(e)}(this,function(e){function t(){if(!s.get("stat_sessid")){var t="//uedas.qidian.com/statajax.aspx?",a={opName:"AddSessionUser",globalId:s.get("stat_gid")||"",curToken:s.get("cmfuToken")||"",pageTitle:document.title,referer:document.referrer,pageUrl:e.location.href,pagePathName:e.location.pathname,pageQueryString:e.location.search,host:e.location.host};o.each(a,function(e,a){t=t+e+"="+encodeURIComponent(a)+"&"}),t=t.substring(0,t.length-1),n(t)}}function a(){if(!s.get("stat_gid")){var t="//uedas.qidian.com/statajax.aspx?",a={opName:"AddGlobalUser",globalId:s.get("stat_gid")||"",curToken:s.get("cmfuToken")||"",pageTitle:document.title,referer:document.referrer,pageUrl:e.location.href,pagePathName:e.location.pathname,pageQueryString:e.location.search,host:e.location.host};o.each(a,function(e,a){t=t+e+"="+encodeURIComponent(a)+"&"}),t=t.substring(0,t.length-1),n(t)}}function n(e){var t=new Image;t.onload=t.onerror=function(){t=null},t.src=e}var i=document,o=e.$||e.Zepto||e.jQuery,d=function(){try{return"pro"===(g_data&&g_data.envType||"pro")?"":g_data.envType}catch(e){return""}}(),r="//"+d+"qdp.qidian.com/qreport?",c={path:"pclog",ltype:"A",url:e.location.href,ref:document.referrer,sw:screen.width,sh:screen.height,x:"",y:"",title:document.title},g={config:function(e){e&&"object"==typeof e&&o.extend(!0,this,e)},init:function(e){var i=this;o(document).ready(function(d){var g=i.cgi?i.cgi+"?":r,s={ltype:"P",pid:function(){try{return g_data.pageId}catch(e){return""}}(),x:"",y:"",chan:""};e&&e.domain&&(i.cookieDomain=e.domain),e&&e.e1&&(i.cookieE1=e.e1),e&&e.e2&&(i.cookieE2=e.e2);var u=o.extend({},c,s,e);o.each(u,function(e,t){g=g+e+"="+encodeURIComponent(t)+"&"}),g=g.substring(0,g.length-1),n(g),i._send(e),u.isQD&&t(),u.isQD&&a()})},_send:function(e){this.initial=0;var t=this;o(document).off("click.Report"),o(document).on("click.Report",function(a){a&&(a.isTrigger===!0||a.isTrusted===!1||a.hasOwnProperty("_args")||0===a.pageY&&0===a.screenY)||t.send(a,e)})},send:function(e,t,a){var i=+new Date;if(!(i-this.initial<100)){this.initial=i;for(var d=o(e.target),g=this.cgi?this.cgi+"?":r,s={ltype:"A",pid:function(){try{return g_data.pageId}catch(e){return""}}(),eid:"",bid:"",cid:"",tid:"",rid:"",qd_dd_p1:"",x:e.clientX+o("body").scrollLeft()||"",y:e.clientY+o("body").scrollTop()||"",qd_game_key:"",auid:"",blid:"",algrid:"",kw:""},u=o.extend({},c,s,t),l=d;l.get(0)&&"BODY"!=l.get(0).tagName;){for(var f=0;f<7;f++)if(l.data("l"+(f+1))){u["l"+(f+1)]=l.data("l"+(f+1));break}l.data("rid")&&(u.rid=l.data("rid")),l.data("eid")&&(u.eid=l.data("eid")),l.data("bid")&&(u.bid=l.data("bid")),l.data("cid")&&(u.cid=l.data("cid")),l.data("tid")&&(u.tid=l.data("tid")),l.data("qd_dd_p1")&&1==l.data("qd_dd_p1")&&(u.qd_dd_p1=l.get(0).href||""),l.data("qd_game_key")&&(u.qd_game_key=l.data("qd_game_key")),l.data("auid")&&(u.auid=l.data("auid")),l.data("blid")&&(u.blid=l.data("blid")),l.data("algrid")&&(u.algrid=l.data("algrid")),l.data("kw")&&(u.kw=l.data("kw")),l=l.parent()}"undefined"!=typeof JSON&&this._getE1E2(u),o.each(u,function(e,t){g=g+e+"="+encodeURIComponent(t)+"&"}),g=g.substring(0,g.length-1),(a||(u.l1=u.l1||"",""!=u.l1))&&(n(g),t=null)}},_getE1E2:function(e){var t={},a=this.cookieDomain||".qidian.com",n=this.cookieE1||"e1",i=this.cookieE1||"e2";s.get(n)||s.set(n,"",a,"",2592e6),s.get(i)||s.set(i,"",a,"",2592e6);for(var o in e)"eid"==o&&(t[o]=e[o]),"pid"==o&&(t[o]=e[o]),/l[1-9]/.test(o)&&(t[o]=e[o]);e.e1=decodeURIComponent(s.get(n)),e.e2=decodeURIComponent(s.get(i)),"undefined"!=typeof JSON&&(s.set(n,JSON.stringify(t),a,"",2592e6),s.set(i,e.e1,a,"",2592e6))}},s={get:function(e){var t=i.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?decodeURIComponent(t[2]):null},set:function(e,t,a,n,o){o&&(o=new Date(+new Date+o));var d=e+"="+escape(t)+(o?"; expires="+o.toGMTString():"")+(n?"; path="+n:"")+(a?"; domain="+a:"");d.length<4096&&(i.cookie=d)}};return"function"!=typeof define&&(e.Report=g),g});